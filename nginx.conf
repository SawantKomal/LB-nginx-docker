http {


        upstream allbackend {
        #ip_hash;
        server localhost:8081;
        server localhost:8082;
        server localhost:8083;
        server localhost:8084;

        }

         upstream allbackend1 {
        #ip_hash;
        server localhost:8081;
        server localhost:8083;
        }

        upstream allbackend2 {
        #ip_hash;
        server localhost:8082;
        server localhost:8084;

        }

        server {

                listen 80;
                #listen 443 ssl http2;
                #ssl_certificate /etc/letsencrypt/live/netdocprox.ddns.net/fullchain.pem;
                #ssl_certificate_key /etc/letsencrypt/live/netdocprox.ddns.net/privkey.pem;
                #ssl_protocols TLSv1.3;
		server_name  testdocker.ddns.net;

                location / {

                        proxy_pass http://allbackend;

                        }

                location /site1 {
                        proxy_pass http://allbackend1;

                }

                location /site2 {
                        proxy_pass http://allbackend2;
                }

                location /admin {

                return 403;

                }


        }
}

events {

        }

